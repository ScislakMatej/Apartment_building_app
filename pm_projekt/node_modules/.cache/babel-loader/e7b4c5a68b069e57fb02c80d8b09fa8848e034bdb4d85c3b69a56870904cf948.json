{"ast":null,"code":"var _jsxFileName = \"/Users/matejscislak/Desktop/4roc_ZS/PM/project/pm_projekt/ProjektManazment/pm_projekt/src/GraphBox.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Buffer } from 'buffer'; // Importujeme Buffer\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { BlobServiceClient } from '@azure/storage-blob';\nimport * as xlsx from 'xlsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nconst GraphBox = () => {\n  _s();\n  const [chartData, setChartData] = useState(null);\n  useEffect(() => {\n    const fetchExcelData = async () => {\n      // Nahradíme connectionString SAS tokenom\n      const sasToken = 'sv=2022-11-02&ss=bfqt&srt=sco&sp=rwdlacupiytfx&se=2024-11-12T20:52:36Z&st=2024-11-12T12:52:36Z&spr=https&sig=s2mz%2BxuhSRp8z3nFO%2FujipnH8sXy2k4x4D48DWMhkSc%3D'; // Získajte SAS token z Azure Portal\n      const containerUrl = `https://portal.azure.com/#view/Microsoft_Azure_Storage/ContainerMenuBlade/~/overview/storageAccountId/%2Fsubscriptions%2Fa4c63af2-05d5-4a4b-a3d4-3c7d77db8e6c%2FresourceGroups%2FPM_project%2Fproviders%2FMicrosoft.Storage%2FstorageAccounts%2Fpmprojectstorage/path/expenses-graph/etag/%220x8DD030D1132FFF7%22/defaultEncryptionScope/%24account-encryption-key/denyEncryptionScopeOverride~/false/defaultId//publicAccessVal/None${sasToken}`;\n      const blobServiceClient = new BlobServiceClient(containerUrl);\n      const containerClient = blobServiceClient.getContainerClient('expenses-graph');\n      const blobClient = containerClient.getBlobClient('graf.xlsx');\n      try {\n        const downloadBlockBlobResponse = await blobClient.download(0);\n        const buffer = await streamToBuffer(downloadBlockBlobResponse.readableStreamBody);\n        const workbook = xlsx.read(buffer, {\n          type: 'buffer'\n        });\n        const sheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[sheetName];\n        const data = xlsx.utils.sheet_to_json(worksheet);\n        const Mesiac = data.map(row => row.Date);\n        const Stav_na_ucte = data.map(row => row.Value);\n        setChartData({\n          labels: Mesiac,\n          datasets: [{\n            label: 'Hodnoty',\n            data: Stav_na_ucte,\n            borderColor: 'rgba(75,192,192,1)',\n            backgroundColor: 'rgba(75,192,192,0.2)',\n            fill: true\n          }]\n        });\n      } catch (error) {\n        console.error('Chyba pri načítaní dát zo súboru Excel:', error);\n      }\n    };\n    fetchExcelData();\n  }, []);\n  const streamToBuffer = stream => {\n    return new Promise((resolve, reject) => {\n      const chunks = [];\n      stream.on(\"data\", chunk => chunks.push(chunk));\n      stream.on(\"end\", () => resolve(Buffer.concat(chunks)));\n      stream.on(\"error\", reject);\n    });\n  };\n  if (!chartData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Na\\u010D\\xEDtavam graf...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"graph-box\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Graf z Excel s\\xFAboru\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: chartData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(GraphBox, \"9euvDhZ+n6eLTlbzwvHmNPhoqAw=\");\n_c = GraphBox;\nexport default GraphBox;\nvar _c;\n$RefreshReg$(_c, \"GraphBox\");","map":{"version":3,"names":["React","useState","useEffect","Buffer","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","BlobServiceClient","xlsx","jsxDEV","_jsxDEV","register","GraphBox","_s","chartData","setChartData","fetchExcelData","sasToken","containerUrl","blobServiceClient","containerClient","getContainerClient","blobClient","getBlobClient","downloadBlockBlobResponse","download","buffer","streamToBuffer","readableStreamBody","workbook","read","type","sheetName","SheetNames","worksheet","Sheets","data","utils","sheet_to_json","Mesiac","map","row","Date","Stav_na_ucte","Value","labels","datasets","label","borderColor","backgroundColor","fill","error","console","stream","Promise","resolve","reject","chunks","on","chunk","push","concat","children","fileName","_jsxFileName","lineNumber","columnNumber","className","_c","$RefreshReg$"],"sources":["/Users/matejscislak/Desktop/4roc_ZS/PM/project/pm_projekt/ProjektManazment/pm_projekt/src/GraphBox.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Buffer } from 'buffer'; // Importujeme Buffer\nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { BlobServiceClient } from '@azure/storage-blob';\nimport * as xlsx from 'xlsx';\n\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\n\nconst GraphBox = () => {\n  const [chartData, setChartData] = useState(null);\n\n  useEffect(() => {\n    const fetchExcelData = async () => {\n      // Nahradíme connectionString SAS tokenom\n      const sasToken = 'sv=2022-11-02&ss=bfqt&srt=sco&sp=rwdlacupiytfx&se=2024-11-12T20:52:36Z&st=2024-11-12T12:52:36Z&spr=https&sig=s2mz%2BxuhSRp8z3nFO%2FujipnH8sXy2k4x4D48DWMhkSc%3D'; // Získajte SAS token z Azure Portal\n      const containerUrl = `https://portal.azure.com/#view/Microsoft_Azure_Storage/ContainerMenuBlade/~/overview/storageAccountId/%2Fsubscriptions%2Fa4c63af2-05d5-4a4b-a3d4-3c7d77db8e6c%2FresourceGroups%2FPM_project%2Fproviders%2FMicrosoft.Storage%2FstorageAccounts%2Fpmprojectstorage/path/expenses-graph/etag/%220x8DD030D1132FFF7%22/defaultEncryptionScope/%24account-encryption-key/denyEncryptionScopeOverride~/false/defaultId//publicAccessVal/None${sasToken}`;\n\n      const blobServiceClient = new BlobServiceClient(containerUrl);\n      const containerClient = blobServiceClient.getContainerClient('expenses-graph');\n      const blobClient = containerClient.getBlobClient('graf.xlsx');\n\n      try {\n        const downloadBlockBlobResponse = await blobClient.download(0);\n        const buffer = await streamToBuffer(downloadBlockBlobResponse.readableStreamBody);\n        const workbook = xlsx.read(buffer, { type: 'buffer' });\n        const sheetName = workbook.SheetNames[0];\n        const worksheet = workbook.Sheets[sheetName];\n\n        const data = xlsx.utils.sheet_to_json(worksheet);\n        const Mesiac = data.map(row => row.Date);\n        const Stav_na_ucte = data.map(row => row.Value);\n\n        setChartData({\n          labels: Mesiac,\n          datasets: [\n            {\n              label: 'Hodnoty',\n              data: Stav_na_ucte,\n              borderColor: 'rgba(75,192,192,1)',\n              backgroundColor: 'rgba(75,192,192,0.2)',\n              fill: true,\n            },\n          ],\n        });\n      } catch (error) {\n        console.error('Chyba pri načítaní dát zo súboru Excel:', error);\n      }\n    };\n\n    fetchExcelData();\n  }, []);\n\n  const streamToBuffer = (stream) => {\n    return new Promise((resolve, reject) => {\n      const chunks = [];\n      stream.on(\"data\", chunk => chunks.push(chunk));\n      stream.on(\"end\", () => resolve(Buffer.concat(chunks)));\n      stream.on(\"error\", reject);\n    });\n  };\n\n  if (!chartData) {\n    return <div>Načítavam graf...</div>;\n  }\n\n  return (\n    <div className=\"graph-box\">\n      <h3>Graf z Excel súboru</h3>\n      <Line data={chartData} />\n    </div>\n  );\n};\n\nexport default GraphBox;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}